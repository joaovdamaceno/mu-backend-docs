"use strict";(self.webpackChunkmu_backend_docs=self.webpackChunkmu_backend_docs||[]).push([[126],{6086:(e,o,r)=>{r.r(o),r.d(o,{assets:()=>l,contentTitle:()=>d,default:()=>u,frontMatter:()=>c,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"db/docker","title":"Docker Desktop (PostgreSQL)","description":"A forma mais simples \xe9 subir s\xf3 o Postgres via Docker Desktop e rodar o backend no IntelliJ.","source":"@site/docs/db/docker.md","sourceDirName":"db","slug":"/db/docker","permalink":"/mu-backend-docs/db/docker","draft":false,"unlisted":false,"editUrl":"https://github.com/joaovdamaceno/mu-backend-docs/tree/main/docs/db/docker.md","tags":[],"version":"current","frontMatter":{"title":"Docker Desktop (PostgreSQL)"},"sidebar":"docsSidebar","previous":{"title":"Flyway (migrations)","permalink":"/mu-backend-docs/db/flyway"},"next":{"title":"Troubleshooting (erros comuns)","permalink":"/mu-backend-docs/db/troubleshooting"}}');var n=r(4848),i=r(8453);const c={title:"Docker Desktop (PostgreSQL)"},d=void 0,l={},a=[{value:"1) Crie um arquivo docker-compose.yml",id:"1-crie-um-arquivo-docker-composeyml",level:2},{value:"2) Subir pelo Docker Desktop (GUI)",id:"2-subir-pelo-docker-desktop-gui",level:2},{value:"3) Subir pelo terminal (mais direto)",id:"3-subir-pelo-terminal-mais-direto",level:2},{value:"4) Vari\xe1veis no IntelliJ",id:"4-vari\xe1veis-no-intellij",level:2}];function t(e){const o={blockquote:"blockquote",code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.p,{children:"A forma mais simples \xe9 subir s\xf3 o Postgres via Docker Desktop e rodar o backend no IntelliJ."}),"\n",(0,n.jsx)(o.h2,{id:"1-crie-um-arquivo-docker-composeyml",children:"1) Crie um arquivo docker-compose.yml"}),"\n",(0,n.jsxs)(o.p,{children:["Crie um arquivo ",(0,n.jsx)(o.code,{children:"docker-compose.yml"})," em qualquer pasta (ex.: ",(0,n.jsx)(o.code,{children:"C:\\dev\\mu-db\\docker-compose.yml"}),"):"]}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-yaml",children:'version: "3.9"\nservices:\n  db:\n    image: postgres:17\n    container_name: mu-postgres\n    environment:\n      POSTGRES_DB: mu\n      POSTGRES_USER: postgres\n      POSTGRES_PASSWORD: postgres\n    ports:\n      - "5432:5432"\n    volumes:\n      - mu_pgdata:/var/lib/postgresql/data\n\nvolumes:\n  mu_pgdata:\n'})}),"\n",(0,n.jsxs)(o.blockquote,{children:["\n",(0,n.jsxs)(o.p,{children:["Eu coloquei ",(0,n.jsx)(o.code,{children:"postgres:17"})," porque \xe9 a vers\xe3o que costuma dar menos dor de cabe\xe7a com ferramentas.\nSe voc\xea usar Postgres 18 e aparecer aviso do Flyway, geralmente ainda roda, mas pode avisar que n\xe3o foi testado."]}),"\n"]}),"\n",(0,n.jsx)(o.h2,{id:"2-subir-pelo-docker-desktop-gui",children:"2) Subir pelo Docker Desktop (GUI)"}),"\n",(0,n.jsxs)(o.ol,{children:["\n",(0,n.jsx)(o.li,{children:"Abra o Docker Desktop"}),"\n",(0,n.jsxs)(o.li,{children:["V\xe1 em ",(0,n.jsx)(o.strong,{children:"Containers"})]}),"\n",(0,n.jsxs)(o.li,{children:["Procure op\xe7\xe3o de ",(0,n.jsx)(o.strong,{children:"Compose"})," (ou \u201cCreate from compose file\u201d)"]}),"\n",(0,n.jsxs)(o.li,{children:["Selecione o ",(0,n.jsx)(o.code,{children:"docker-compose.yml"})]}),"\n",(0,n.jsxs)(o.li,{children:["Clique em ",(0,n.jsx)(o.strong,{children:"Deploy"})]}),"\n"]}),"\n",(0,n.jsx)(o.h2,{id:"3-subir-pelo-terminal-mais-direto",children:"3) Subir pelo terminal (mais direto)"}),"\n",(0,n.jsxs)(o.p,{children:["Na pasta do ",(0,n.jsx)(o.code,{children:"docker-compose.yml"}),":"]}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-bash",children:"docker compose up -d\n"})}),"\n",(0,n.jsx)(o.p,{children:"Para parar e remover (mantendo volume):"}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-bash",children:"docker compose down\n"})}),"\n",(0,n.jsx)(o.p,{children:"Para apagar TUDO (inclui dados do banco):"}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-bash",children:"docker compose down -v\n"})}),"\n",(0,n.jsx)(o.h2,{id:"4-vari\xe1veis-no-intellij",children:"4) Vari\xe1veis no IntelliJ"}),"\n",(0,n.jsx)(o.p,{children:"No Run/Debug Configuration do seu backend, adicione:"}),"\n",(0,n.jsxs)(o.ul,{children:["\n",(0,n.jsx)(o.li,{children:(0,n.jsx)(o.code,{children:"DB_URL=jdbc:postgresql://localhost:5432/mu"})}),"\n",(0,n.jsx)(o.li,{children:(0,n.jsx)(o.code,{children:"DB_USERNAME=postgres"})}),"\n",(0,n.jsx)(o.li,{children:(0,n.jsx)(o.code,{children:"DB_PASSWORD=postgres"})}),"\n"]}),"\n",(0,n.jsx)(o.p,{children:"Rode o backend. Se o Flyway estiver ativo, voc\xea deve ver logs de migrations."})]})}function u(e={}){const{wrapper:o}={...(0,i.R)(),...e.components};return o?(0,n.jsx)(o,{...e,children:(0,n.jsx)(t,{...e})}):t(e)}},8453:(e,o,r)=>{r.d(o,{R:()=>c,x:()=>d});var s=r(6540);const n={},i=s.createContext(n);function c(e){const o=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(o):{...o,...e}},[o,e])}function d(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:c(e.components),s.createElement(i.Provider,{value:o},e.children)}}}]);